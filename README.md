# Luby transform codes

对本地文件使用卢比变换码进行编解码。

针对编码使用的随机种子，以其定长版本为基础，设计了变长版本，又分为使用和未使用汉明码保护种子长度字段的两个版本。

变长版本在使用汉明码的情况下最多支持 2^27^ 个编码包，否则可支持 2^30^ 个。

度分布函数：鲁棒孤子分布

解码算法：置信度传播

校验和：CRC-8 ($x^8 + x^2 + x + 1$)

## 使用方法

以定长种子版本为例：

```bash
# 编码
./encoder-static <待编码文件路径> <编码块大小(B)> <编码包数量>
# 解码
./decoder-static <待解码文件路径> <编码块大小(B)> <原始文件大小(B)>
```

编解码分别会按文件名生成 `.enc` 和 `.dec` 后缀的二进制文件

## 注意

使用汉明码是为了确保能够（在发生 1 位错的情况下）读出正确的种子长度，但实际上，即使是在 nohamming 版本中，如果编码了足够数量的冗余包，就算某个包的种子长度字段被修改，导致后续读取的数据发生错位，也有几率完成解码。这是因为累加的错位偏移最终达到了包本身的长度，重新将数据对齐了，使得这之后的包又能够被正确读取。
